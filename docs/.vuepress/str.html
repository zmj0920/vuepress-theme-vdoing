<html>

<head>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
    <meta charset="utf-8" />
    <script type="text/javascript" src="http://www.toolzl.com/Public/md/js/jquery.js"></script>
    <link rel="stylesheet" href="https://www.bootcss.com/p/buttons/css/buttons.css">
    <style>
        input,
        textarea {
            outline: none;
        }
    </style>
</head>

<body>
    <div>
        <div style="text-align: center;margin-top: 30px;">
            <div style="text-align: center;margin-bottom: 50px;">
                当前时间：<input type="text" id="value_two">
                <button onclick="fmt_date_time()" class="button button-primary button-rounded button-small">刷新</button>
            </div>
            <label>输入随机字符串长度:</label>
            <input type="text" id="data" value="10">
            <input type="checkbox" id="a1">字母大写
            <input type="checkbox" checked="checked" id="a2">字母小写
            <input type="checkbox" checked="checked" id="a3">数字
            <input type="checkbox" id="a4">字符
            <button onclick="createString()" class="button button-primary button-rounded button-small">生成</button>
        </div>
        <div style="margin-top: 20px;">
            <textarea id="content" style="width: 80%;display: flex;margin: auto;" rows="10"></textarea>
        </div>

    </div>
</body>
<script>
    $(function () {
        $('#data').keydown(function (e) {
            if (e.keyCode == 13) {
                createString();
            }
        });
        fmt_date_time();
    })

    function createString() {
        var len = $('#data').val();
        var chars = '';
        if ($('#a1')[0].checked) {
            chars += 'ABCDEFGHJKMNPQRSTWXYZ';
        }
        if ($('#a2')[0].checked) {
            chars += 'abcdefhijkmnprstwxyz';
        }
        if ($('#a3')[0].checked) {
            chars += '0123456789';
        }
        if ($('#a4')[0].checked) {
            chars += '!@#$%*&_';
        }
        var maxPos = chars.length;
        var pwd = '';
        for (i = 0; i < len; i++) {
            pwd += chars.charAt(Math.floor(Math.random() * maxPos));
        }
        $('#content').val(pwd);
    }


    function fmt_date_time() {
        var date = new Date();
        var y = date.getFullYear();
        var m = date.getMonth() + 1;
        m = m < 10 ? ('0' + m) : m;

        var d = date.getDate();
        d = d < 10 ? ('0' + d) : d;

        var h = date.getHours();
        h = h < 10 ? ('0' + h) : h;

        var minute = date.getMinutes();
        var second = date.getSeconds();
        minute = minute < 10 ? ('0' + minute) : minute;
        second = second < 10 ? ('0' + second) : second;
        // return y + '-' + m + '-' + d + ' ' + h + ':' + minute + ':' + second;
        document.getElementById('value_two').value = y + '-' + m + '-' + d + ' ' + h + ':' + minute + ':' + second;
    }
</script>

</html>